# Nostradamus: Stock Market Predictions

## Goal of the Script

Nostradamus is a command-line tool written in Go that forecasts potential future stock market events based on an input event description. The script works in two sequential phases:
1. **Prediction Generation**: The first agent generates a set of predictions in JSON format. Each prediction includes a timeframe, a description of the event, and its anticipated impact on the stock market.
2. **Critique and Review**: The second agent reviews these predictions, appending two additional fields to each prediction: a confidence score (a float between 0 and 1) and a textual critique explaining the likelihood of the prediction.

## Limitations

- **Fictional Events**: The predictions generated by Nostradamus are based on fictional scenarios. They are imaginative in nature and do not represent real financial advice.
- **Dependence on LLM Output**: The tool relies on responses from language models, which may sometimes produce unexpected formats or unrealistic outputs. Therefore, it employs multiple retry attempts to obtain a valid result.
- **Experimental Nature**: Given the creative approach of the script, some outputs might not perfectly match expectations. Users should consider the predictions as speculative and illustrative rather than definitive.

## Requirements

- **Environment Variable**:  
  The script requires a valid API key for OpenAIâ€™s service. Set the following environment variable before running:
  ```
  OPENAI_API_KEY
  ```

## How to Run

1. Set your OpenAI API key in your terminal:
   ```bash
   export OPENAI_API_KEY=your_openai_api_key_here
   ```
2. Optionally, enable debug logging to see detailed execution logs by setting the DEBUG environment variable to 1:
   ```bash
   export DEBUG=1
   ```
3. Execute the script by providing an event description as an argument:
   ```bash
   go run main.go "The ocean isn't salty anymore"
   ```

## Debug Logging

When the DEBUG environment variable is set to 1, Nostradamus will output detailed debug information using structured logging. This can help you trace the execution flow and diagnose issues. If DEBUG is not set or is set to a value other than 1, debug logs will be suppressed.

## Example Output

When running the command `go run main.go "The ocean isn't salty anymore"` you get a result similar to:

```json
{
  "original_prompt": "The ocean isn't salty anymore",
  "predictions": [
    {
      "timeframe": "1 month",
      "description": "Significant decline in the salt industry as demand plummets due to the absence of natural salt sources from the oceans.",
      "impact": "Negative impact on companies specializing in salt production and distribution, potentially leading to stock price drops in the sector.",
      "confidence": 0.05,
      "critique": "The premise that oceans have lost their salinity is highly implausible within a one-month timeframe. Ocean salinity is influenced by long-term geological and hydrological processes, making such a drastic change virtually impossible in such a short period. Therefore, the predicted decline in the salt industry is unlikely to materialize."
    },
    {
      "timeframe": "3 months",
      "description": "Disruption in the global fishing industry as freshwater oceans lead to a collapse of marine ecosystems, reducing fish populations.",
      "impact": "Decline in revenues for fishing companies and related supply chains, causing investor concern and potential sell-offs in the industry.",
      "confidence": 0.07,
      "critique": "A sudden shift to freshwater oceans would have catastrophic effects on marine ecosystems, but such a transformation is not feasible within three months. Marine species are adapted to saline environments, and a rapid change would likely lead to mass extinctions. However, the timeframe is unrealistic, making the predicted disruptions and financial impacts unlikely in the near term."
    },
    {
      "timeframe": "6 months",
      "description": "Surge in investment in alternative salt production methods and freshwater marine farming technologies to compensate for the loss of natural ocean salt.",
      "impact": "Growth in stocks of companies innovating in alternative salt production and sustainable aquaculture, presenting new investment opportunities.",
      "confidence": 0.10,
      "critique": "While the development of alternative salt production and sustainable aquaculture is a positive trend, tying this surge directly to the hypothetical scenario of non-salty oceans remains unlikely within six months. The timeframe is too short for significant technological advancements and market shifts in these sectors. Additionally, the initial premise lacks realism, thereby reducing the likelihood of the predicted investment surge."
    }
  ]
}
```
