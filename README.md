# Nostradamus: Stock Market Predictions

## Goal of the Script

Nostradamus is a command-line tool written in Go that forecasts potential future stock market events based on an input event description. The script works in two sequential phases:
1. **Prediction Generation**: The first agent generates a set of predictions in JSON format. Each prediction includes a timeframe, a description of the event, and its anticipated impact on the stock market.
2. **Critique and Review**: The second agent reviews these predictions, appending two additional fields to each prediction: a confidence score (a float between 0 and 1) and a textual critique explaining the likelihood of the prediction.

## Limitations

- **Fictional Events**: The predictions generated by Nostradamus are based on fictional scenarios. They are imaginative in nature and do not represent real financial advice.
- **Dependence on LLM Output**: The tool relies on responses from language models, which may sometimes produce unexpected formats or unrealistic outputs. Therefore, it employs multiple retry attempts to obtain a valid result.
- **Experimental Nature**: Given the creative approach of the script, some outputs might not perfectly match expectations. Users should consider the predictions as speculative and illustrative rather than definitive.

## Requirements

- **Environment Variable**:  
  The script requires a valid API key for OpenAIâ€™s service. Set the following environment variable before running:
  ```
  OPENAI_API_KEY
  ```

## How to Run

1. Set your OpenAI API key in your terminal:
   ```bash
   export OPENAI_API_KEY=your_openai_api_key_here
   ```
2. Optionally, enable debug logging to see detailed execution logs by setting the DEBUG environment variable to 1:
   ```bash
   export DEBUG=1
   ```
3. Execute the script by providing an event description as an argument:
   ```bash
   go run cmd/main.go "The ocean isn't salty anymore"
   ```

## Debug Logging

When the DEBUG environment variable is set to 1, Nostradamus will output detailed debug information using structured logging. This can help you trace the execution flow and diagnose issues. If DEBUG is not set or is set to a value other than 1, debug logs will be suppressed.

## Example Output

When running the command `go run cmd:main.go "The planet has warmed up .1 degree faster than predicted" you get a result similar to:

```json
{
  "original_prompt": "The planet has warmed up .1 degree faster than predicted",
  "predictions": [
    {
      "timeframe": "6 months",
      "description": "Accelerated global warming may lead to increased regulatory pressures on carbon emissions. Governments might implement stricter environmental policies to curb further warming, affecting industries reliant on fossil fuels.",
      "impact": "Energy sector stocks, particularly fossil fuel companies, may experience declines due to heightened regulatory risks.",
      "confidence": 0.7,
      "critique": "The accelerated warming trend can heighten the urgency for governments to act, increasing the likelihood of stricter regulations. However, policy changes often face political and economic hurdles that may delay immediate implementation."
    },
    {
      "timeframe": "1 year",
      "description": "Faster warming can exacerbate extreme weather events, disrupting supply chains and increasing operational costs for manufacturing companies. Businesses may face higher insurance premiums and potential damages from climate-related incidents.",
      "impact": "Manufacturing and logistics industries could see reduced profit margins and increased volatility in their stock prices.",
      "confidence": 0.65,
      "critique": "There is a growing correlation between climate change and extreme weather events, which can disrupt supply chains. Nevertheless, the extent and timing of such disruptions are often unpredictable, affecting the confidence level."
    },
    {
      "timeframe": "2 years",
      "description": "Heightened awareness and urgency around climate change may drive increased investment in renewable energy and sustainable technologies. Companies specializing in solar, wind, and electric vehicles are likely to attract more capital.",
      "impact": "Renewable energy sector stocks are expected to rise as investor interest shifts towards sustainable solutions.",
      "confidence": 0.8,
      "critique": "The trend towards sustainable investment is strong and supported by both consumer demand and policy incentives. This makes the prediction of increased capital flow into renewable energy sectors fairly reliable."
    },
    {
      "timeframe": "3 years",
      "description": "Agricultural yields may be negatively impacted by the accelerated warming, leading to higher food prices and increased costs for food processing companies. This could also affect commodity markets tied to essential crops.",
      "impact": "Food and agriculture-related stocks might face pressure from rising input costs and supply chain challenges.",
      "confidence": 0.6,
      "critique": "While climate change poses risks to agriculture, the actual impact on yields can vary by region and crop type. Adaptive measures by farmers and advancements in agricultural technology may mitigate some negative effects, reducing overall confidence."
    },
    {
      "timeframe": "5 years",
      "description": "Long-term climate shifts could influence real estate markets, especially in regions prone to extreme weather or sea-level rise. Property values in vulnerable areas may decline, while investments in resilient infrastructure could become more attractive.",
      "impact": "Real estate investment trusts (REITs) and construction companies focused on sustainable building practices may see varied performance based on geographic exposure.",
      "confidence": 0.75,
      "critique": "Climate resilience is becoming a key factor in real estate investment decisions, and areas vulnerable to climate risks are increasingly scrutinized. However, market responses can be gradual and influenced by a variety of economic factors, slightly tempering the confidence."
    }
  ]
}
```
